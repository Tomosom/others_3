# GUI程序原理回顾
- 图形界面应用程序的消息处理模型
    ![](_v_images_038/1.png)

- 思考
    操作系统发送的<font color=blue>消息</font>如何转变成<font color=red>Qt信号</font> ？

# Qt中的事件处理
- Qt平台将系统产生的消息转换为g事件
    - Qt事件是一个 <font color=#d0d>QEvent</font> 的对象
    - Qt事件用于<font color=red>描述程序内部或外部发生的动作</font>
    - 任意的 <font color=#d0d>QObject</font> 对象都具备事件处理的能力

    ![](_v_images_038/2.png)

- GUI应用程序的事件处理方式
    1. Qt 事件产生后立即被<font color=blue>分发到 QWidget 对象</font>
    2. QWidget 中的 <font color=red>event(QEvent*)</font> 进行事件处理
    3. event() 根据事件类型<font color=#d0d>调用不同的事件处理函数</font>
    4. 在事件处理函数中<font color=green>发送Qt中预定义的信号</font>
    5. <font color=blue>调用信号关联的槽函数</font>

- 场景分析 : 按钮点击
![](_v_images_038/3.png)

- <font color=#d0d>QPushButton</font> 事件处理分析
    1. 接收到鼠标事件
    2. 调用 event(<font color=#d0d>QEvent</font>*) 成员函数
    3. 调用 mouseReleaseEvent(<font color=#d0d>QMouseEvent</font>*) 成员函数
    4. 调用 <font color=red>click()</font> 成员函数
    5. 触发信号 <font color=blue>SIGNAL(clicked())</font>

# [<u>编程实验 自定义事件处理函数</u>](code/038_Event_handling_in_Qt_1)

# Qt中的事件处理
- 事件 (<font color=green>QEvent</font>) 和信号 (<font color=red>SIGNAL</font>) 不同
    - <font color=#d0d>事件由具体对象进行处理</font>
    - <font color=#d0d>信号由具体对象主动产生</font>
    - <font color=blue>改写事件处理函数可能导致程序行为发生改变</font>
    - <font color=blue>信号是否存在对应的槽函数不会改变程序行为</font>
    - <font color=#d0d>一般而言</font>，信号在具体的事件处理函数中产生

- 文本编辑器中的关闭操作
![](_v_images_038/4.png)

# [<u>编程实验 文本编辑器的关闭操作</u>](code/038_Event_handling_in_Qt_1)

# 小结
- Qt中的事件 (<font color=#d0d>QEvent</font>) 和信号 (<font color=red>SIGNAL</font>) 不同
- 事件由 <font color=#d0d>QObject</font> 的对象进行处理
- 倍号由 <font color=#d0d>QObject</font> 对象触发
- <font color=blue>重写事件处理函数可能改变程序行为</font>
- 信号的触发不会对程序行为造成影响
- <font color=#d0d>事件处理是在实际工程开发中的应用非常普遍</font>